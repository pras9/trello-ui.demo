var app=function(a,b,c){"use strict";var d={};return d.init=function(a){if(null==a||""==a)throw new Error("Simulation ID not provided for the app to start!");var b=this;this.simId=a,this.currentScreenIndex=0,this.scoreCalculator=new ScoreCalculator,this.complete=!1,this.settings={totalPossibleScore:[],attempts:[],totalScreens:0},this.moduleData={},this.moduleData.screen=[],c.ajax({type:"GET",url:APP_PATH.DATA+"/sim"+this.simId+".xml",dataType:"text",async:!0,success:function(a){b.processData(a)}})},d.getHash=function(){return window.location.hash.replace("#","")},d.updateHash=function(a){window.location.hash="#"+a},d.processData=function(b){a.data=c.parseXML(b),this.settings.totalScreens=c(b).find("screen").size(),this.settings.type=c(b).find("simulation").attr("type"),this.uiBuilder=new UiBuilder,this.uiBuilder.buildBase(),this.nextScreen()},d.getScreenData=function(){return null!=this.moduleData.screen[this.currentScreenIndex]?this.moduleData.screen[this.currentScreenIndex]:null},d.updateScreenData=function(a){this.moduleData.screen[this.currentScreenIndex]=a},d.nextScreen=function(){var b=null;this.currentScreenIndex+=1,b=c(a.data).find("screen[id="+this.currentScreenIndex+"]"),b.length>0&&this.complete!==!0?(this.uiBuilder.buildScreen(b),this.moduleData.screen.push({}),d.updateHash("screen"+this.currentScreenIndex),c(APP_CONST.APP_CONTAINER).focus()):this.complete=!0},d}(window,document,jQuery);$(document).ready(function(){app.init(APP_CONST.SIMULATION_ID)});